% !TEX program = xelatex
\newpage

\section{پاک‌سازی داده و استخراج ویژگی‌ها}

\subsection{نمای کلی پروژه}	این گزارش فرایند پیش‌پردازش داده برای سامانه‌ی تشخیص زبان را توضیح می‌دهد. هدف، طبقه‌بندی فایل‌های صوتی به چهار زبان آلمانی، ایتالیایی، کره‌ای و اسپانیایی است.

\subsection{بارگذاری داده‌ها}
\subsubsection{منبع داده}	ساختار ورودی به صورت زیر است:
\begin{itemize}
\item مسیر ورودی: \lr{./raw/}
\item ساختار: \lr{raw\{Language\}/\{Gender\}/*.mp3}
\item تعداد کل فایل‌ها: $720$ فایل صوتی (تقریباً ۱ دقیقه‌ای)
\end{itemize}

\subsubsection{توزیع داده}	توزیع جنسیت و زبان متوازن است:

\begin{table}[H]
	\centering
	\caption{توزیع داده بر حسب زبان و جنسیت}
	\begin{tabular}{lccc}
		\toprule
		زبان & مرد & زن & جمع \\
		\midrule
		آلمانی & 90 & 90 & 180 \\
		ایتالیایی & 90 & 90 & 180 \\
		کره‌ای & 90 & 90 & 180 \\
		اسپانیایی & 90 & 90 & 180 \\
		\midrule
		\textbf{جمع کل} & \textbf{360} & \textbf{360} & \textbf{720} \\
		\bottomrule
	\end{tabular}
\end{table}

\subsection{پاک‌سازی داده‌ها}
\subsubsection{مراحل اعتبارسنجی}	برای اطمینان از سلامت داده‌ها مراحل زیر انجام شد:
\begin{enumerate}
\item \textbf{تحلیل نام فایل‌ها}: استخراج فراداده از نام فایل و مقایسه با ساختار پوشه‌ها.
\item \textbf{اعتبارسنجی صوت}: اطمینان از قابل‌بارگذاری بودن فایل و محاسبه‌ی مدت زمان.
\item \textbf{تشخیص ناسازگاری}: شناسایی مواردی که برچسب نام فایل با پوشه متفاوت باشد.
\end{enumerate}

\subsubsection{نتایج}	
\begin{itemize}
\item تعداد فایل‌های نامعتبر: $0$
\item بازه‌ی مدت زمان: تقریباً $55$ تا $65$ ثانیه برای هر فایل
\item مجموعه‌ی نهایی: $720$ فایل معتبر (۱۰۰\%)
\end{itemize}

\subsubsection{تصمیم کلیدی}	ساختار پوشه‌ها به عنوان \textbf{منبع حقیقت} برچسب‌ها در نظر گرفته شد؛ زیرا نام فایل‌ها ممکن است خطا داشته باشند.

\subsection{استخراج ویژگی‌ها}
\subsubsection{پیکربندی}	
\begin{itemize}
\item نرخ نمونه‌برداری: $22050$ هرتز
\item تعداد ضرایب \lr{MFCC}: $13$
\end{itemize}

\subsubsection{ویژگی‌های استخراج‌شده (جمعاً 86 ویژگی)}

\begin{table}[H]
	\centering
	\caption{انواع ویژگی‌های استخراج‌شده}
	\begin{tabular}{p{6cm}p{6.5cm}c}
		\toprule
		نوع ویژگی & توضیح & تعداد \\
		\midrule
		\lr{MFCC} (میانگین + انحراف معیار) & نمایش پوش طیفی & 26 \\
		\lr{MFCC Delta} (میانگین + انحراف معیار) & نرخ تغییر \lr{MFCC} & 26 \\
		\lr{MFCC Delta$^2$} (میانگین + انحراف معیار) & شتاب تغییر \lr{MFCC} & 26 \\
		\lr{Spectral Centroid} (میانگین + انحراف معیار) & روشنایی صدا & 2 \\
		\lr{Spectral Rolloff} (میانگین + انحراف معیار) & مرز انرژی فرکانس بالا & 2 \\
		\lr{Zero Crossing Rate} (میانگین + انحراف معیار) & نویزی بودن سیگنال & 2 \\
		\lr{RMS Energy} (میانگین + انحراف معیار) & بلندی/حجم صدا & 2 \\
		\midrule
		\textbf{جمع} &  & \textbf{86} \\
		\bottomrule
	\end{tabular}
\end{table}

\subsubsection{روش تجمیع}	برای هر ویژگی، \textbf{میانگین} و \textbf{انحراف معیار} در طول زمان محاسبه شد؛ این کار فایل‌های با طول متغیر را به بردار ثابت ۸۶بعدی تبدیل می‌کند.

\subsection{تقسیم آموزش/آزمون}
\subsubsection{پیکربندی}	
\begin{itemize}
\item نسبت تقسیم: ۸۰\% آموزش، ۲۰\% آزمون
\item نمونه‌گیری لایه‌ای (Stratified) برای حفظ توازن کلاس‌ها
\item \lr{Random State} برابر $42$ برای بازتولیدپذیری
\end{itemize}

\subsubsection{نتایج}	

\begin{table}[H]
	\centering
	\caption{اندازه‌ی مجموعه‌های آموزش و آزمون}
	\begin{tabular}{lcc}
		\toprule
		مجموعه & تعداد نمونه & تعداد تقریبی در هر کلاس \\
		\midrule
		آموزش & 576 & \textasciitilde 144 \\
		آزمون & 144 & \textasciitilde 36 \\
		\bottomrule
	\end{tabular}
\end{table}

\subsection{افزایش داده}
\subsubsection{هدف}	افزایش تنوع داده‌ی آموزش برای بهبود تعمیم‌پذیری مدل.

\subsubsection{روش‌ها (۵ تغییر برای هر نمونه)}
\begin{enumerate}
\item تغییر گام (+2 نیم‌پرده)
\item تغییر گام (-2 نیم‌پرده)
\item کشش زمانی (۱.۱ برابر) — سریع‌تر
\item کشش زمانی (۰.۹ برابر) — کندتر
\item افزودن نویز گاوسی با $\sigma=0.005$
\end{enumerate}

\subsubsection{نتایج}	

\begin{table}[H]
	\centering
	\caption{اندازه‌ی داده قبل و بعد از افزایش}
	\begin{tabular}{lccc}
		\toprule
		مجموعه & اصلی & افزایش‌یافته & جمع \\
		\midrule
		آموزش & 576 & 2880 & \textbf{3456} \\
		آزمون & 144 & 0 & \textbf{144} \\
		\bottomrule
	\end{tabular}
\end{table}

\noindent\textbf{نکته:} مجموعه‌ی آزمون افزایش داده نشده است تا ارزیابی منصفانه باقی بماند.

\subsection{نرمال‌سازی}
\subsubsection{روش}	
\begin{itemize}
\item استفاده از \lr{StandardScaler} برای تبدیل ویژگی‌ها به میانگین $0$ و انحراف معیار $1$.
\item برازش فقط روی داده‌ی آموزش (جلوگیری از نشت اطلاعات).
\item اعمال تبدیل روی داده‌ی آموزش و آزمون.
\end{itemize}

\subsubsection{دو نسخه‌ی ذخیره‌شده}	
\begin{enumerate}
\item \textbf{با افزایش داده}: مقیاس‌ساز روی آموزش افزایش‌یافته برازش شده است.
\item \textbf{بدون افزایش داده}: مقیاس‌ساز روی آموزش اصلی برازش شده است.
\end{enumerate}

\subsection{خروجی‌ها}
\subsubsection{ساختار فایل‌ها}	
\begin{latin}
\begin{verbatim}
data/
├── augmented/
│   ├── X_train.npy      # (3456, 86) - augmented + normalized
│   ├── X_test.npy       # (144, 86) - normalized
│   ├── y_train.npy      # (3456,) - labels
│   ├── y_test.npy       # (144,) - labels
│   └── scaler.pkl       # Fitted StandardScaler
│
├── no_augmentation/
│   ├── X_train.npy      # (576, 86) - normalized
│   ├── X_test.npy       # (144, 86) - normalized
│   ├── y_train.npy      # (576,) - labels
│   ├── y_test.npy       # (144,) - labels
│   └── scaler.pkl       # Fitted StandardScaler
│
├── metadata.csv         # File info (path, language, gender, duration)
└── feature_names.npy    # List of 86 feature names
\end{verbatim}
\end{latin}

\subsection{تصمیم‌های کلیدی و منطق}
\begin{table}[H]
	\centering
	\caption{تصمیم‌ها و دلایل}
	\begin{tabular}{p{5.5cm}p{9.5cm}}
		\toprule
		تصمیم & منطق \\
		\midrule
		پوشه به عنوان مرجع برچسب & امکان خطا در نام فایل‌ها؛ ساختار پوشه پایدارتر است. \\
		نسبت 80/20 & نسبت استاندارد با تعداد کافی نمونه‌ی آزمون. \\
		تقسیم لایه‌ای & حفظ توازن کلاس‌ها در هر دو مجموعه. \\
		افزایش فقط در آموزش & جلوگیری از آلودگی مجموعه‌ی آزمون. \\
		نرمال‌سازی بعد از تقسیم & جلوگیری از نشت اطلاعات. \\
		ذخیره‌ی هر دو نسخه & انعطاف‌پذیری برای آزمایش‌های بعدی. \\
		بذر تصادفی ثابت & تضمین بازتولیدپذیری. \\
		\bottomrule
	\end{tabular}
\end{table}

\subsection{جمع‌بندی}	خط لوله‌ی پیش‌پردازش داده با موفقیت مجموعه‌ی صوتی را پاک‌سازی، ویژگی‌ها را استخراج و داده‌ها را برای مرحله‌ی مدل‌سازی آماده کرده است.


